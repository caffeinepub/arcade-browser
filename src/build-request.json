{
  "kind": "build_request",
  "title": "Add free drive mode with WASD controls and third-person camera",
  "projectName": "Mechanical Assembly",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a 'Drive Mode' toggle button to the assembly game UI that switches between Build Mode and Drive Mode",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "add a free use/drive mode",
          "switch between building and driving"
        ]
      },
      "acceptanceCriteria": [
        "A clearly labeled button or toggle is visible in the assembly game interface",
        "Clicking the toggle switches between Build Mode and Drive Mode",
        "The current mode is clearly indicated to the user"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Implement WASD keyboard controls for driving the assembled vehicle in Drive Mode (W=forward, S=backward, A=turn left, D=turn right)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "the drving should use wasd"
        ]
      },
      "acceptanceCriteria": [
        "W key accelerates the vehicle forward",
        "S key moves the vehicle backward or brakes",
        "A key turns the vehicle left",
        "D key turns the vehicle right",
        "Controls only respond when in Drive Mode"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Implement a third-person camera view that follows behind the assembled vehicle during Drive Mode",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "third person view"
        ]
      },
      "acceptanceCriteria": [
        "Camera is positioned behind and slightly above the vehicle",
        "Camera smoothly follows the vehicle's position and rotation",
        "The entire vehicle is visible in the frame",
        "Camera maintains appropriate distance from the vehicle"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Implement moderately realistic vehicle physics with momentum, friction, and turning dynamics that are fun to control",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "moderatly realistic",
          "with momentum and friction, but still fun to control"
        ]
      },
      "acceptanceCriteria": [
        "Vehicle has inertia and doesn't instantly start/stop",
        "Friction gradually slows the vehicle when no input is applied",
        "Turning radius feels realistic but responsive",
        "Vehicle can tip or lose traction on sharp turns",
        "Physics are challenging but not frustrating"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Disable part placement, inventory interaction, and assembly mechanics when Drive Mode is active",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Parts inventory is hidden or disabled in Drive Mode",
        "Cannot place, move, or remove parts in Drive Mode",
        "Can only control the vehicle movement and camera",
        "Switching back to Build Mode re-enables all building features"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Allow driving only when at least a chassis part has been placed in the assembly",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Drive Mode button is disabled or shows a message if no chassis is placed",
        "Vehicle can be driven once a valid chassis exists",
        "Assembled wheels affect vehicle behavior if present"
      ]
    }
  ],
  "constraints": [
    "Must use React Three Fiber for 3D rendering",
    "Must integrate with existing AssemblyGame.ts engine and state management",
    "Do not modify backend/main.mo",
    "Do not break existing Build Mode functionality"
  ],
  "nonGoals": [
    "Multiplayer driving mode",
    "First-person camera view",
    "Realistic damage or destruction physics",
    "Environmental obstacles or race tracks",
    "Vehicle customization beyond existing parts"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}